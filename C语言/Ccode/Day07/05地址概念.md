# 地址概念

## 内存地址
- 字节：字节是内存的容量单位，英文称为 byte，一个字节有8位，即 1byte = 8bits
- 地址：系统为了便于区分每一个字节而对它们逐一进行的编号，称为内存地址，简称地址。

计算机的位宽（32 位 / 64 位）决定了内存地址的最大长度，进而直接限制了理论上可访问的最大内存空间，内存地址的大小和位宽是一一对应的，而实际可用内存还会受操作系统、硬件等因素影响。


### 32 位计算机
地址总线的位数为 32 位，意味着内存地址是一个 32 位的二进制数。

32 位二进制数能表示的地址数量为 2^32 个。

换算成字节：2^32Bytes=4 GB。

因此，32 位计算机的内存地址长度为 4 字节（32 位），理论最大寻址空间是 4GB。

### 64 位计算机

地址总线位数为 64 位，内存地址是 64 位的二进制数。

理论地址数量为 2^64个，

换算成字节：2^64Bytes=16 EB（艾字节）。

因此，64 位计算机的内存地址长度为 8 字节（64 位），理论最大寻址空间是 16EB。
注：目前民用级 64 位 CPU 和操作系统，实际只启用了 40-48 位地址总线，所以常见的最大支持内存是 1TB-256TB，远未达到 16EB 的理论上限。

限制因素| 	32 位计算机影响	 | 64 位计算机影响
---|---|---
操作系统版本	| 32 位系统只能识别和使用约 3.2-3.5GB内存（因为部分地址空间被硬件占用）| 	64 位系统无此限制，能识别并使用大内存
硬件限制	| 主板的内存插槽数量、最大支持容量，会进一步限制实际可装内存	| 同理，主板的物理限制起决定作用
应用程序兼容性| 	32 位程序默认只能使用 2GB 虚拟内存（可通过系统设置扩展到 4GB）| 	64 位程序可使用全部虚拟内存空间

## 基地址

- 单字节数据：对于单字节数据而言，基地址就是其字节编号。
- 多字节数据：对于多字节数据而言，基地址是其所有字节中编号最小的那个，称为基地址。
![](./基地址.png)

## 取址符

每个变量都是一块内存，都可以通过取址符 & 获取其地址
```c
int a;
char b;

// 注意：
// 虽然不同的变量的尺寸是不同的，但是他们的地址的尺寸确实一样的。
// 不同的地址虽然形式上看起来是一样的，但由于他们代表的内存尺寸和类型都不同，因此它们在逻辑上是严格区分的。
&a + 1 // 偏移4字节
&b + 1 // 偏移1字节
```

## 指针

由于翻译的问题，以及口语表达的习惯，在日常表述中，指针在不同的场合会代表以下几个含义：
- 指地址
    - 比如变量a的地址 &a，这是一个地址当然也是一个指针
    - 我们可以说指针 &a 指向变量 a。
- 指指针变量
    - 比如 int *p; 此处变量p是指针变量，又常被简称指针。

```c
 int *p; p是一个指针, 此处指针含义是地址变量
 &a  使用取值符拿到了a的指针,此处指针含义是地址
```

### 指针变量

一个专门用来存放内存地址的变量，指针也就是指针变量

格式: `指向内存数据类型 *变量名`

```c
int a;

int *p = &a;

char b;

char *p1 = &b;

long c;

long *p2 = &c;

int arr[10];
// arr表示首元素地址,此处指针类型首元素的类型
int *p3 = arr;

// 指向整个int [10]数组基地址的指针变量
int (*p4)[10]= &arr;

```